{"version":3,"sources":["components/map/Country.js","components/map/Label.js","components/map/Graticule.js","components/map/Bathymetry.js","components/Map.js","Styles.js","components/MapRenderer.js","Projections.js","Utils.js","App.js","serviceWorker.js","index.js"],"names":["Country","props","path","d3","projection","react_default","a","createElement","className","d","feature","fill","stroke","strokeWidth","Label","scaleFactor","size","fontStyle","concat","value","properties","NAME","xOffset","length","x","y","style","font","color","Graticule","Bathymetry","Map","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","_getStatePaths","bind","assertThisInitialized","_getGraticules","_getBathymetry","_getLabelData","svgRef","React","createRef","labelData","MAPDATA_HIGH","features","map","area","coordinates","centroid","d3projections","center","updateSvg","current","w","width","h","height","lon","lat","scale","Math","PI","translate","rotate","mapData","renderLevel","MAPDATA_LOW","statePaths","graticules","bathymetry","labels","ref","xmlns","mapStyle","sea","data","_this2","i","map_Country","borders","land","key","_this3","map_Graticule","_this4","dataset","j","map_Bathymetry","_this5","c","projectedCoord","map_Label","Component","styles","name","Styles","list","default","isValid","filter","p","get","s","coordinateEquals","b","objectEquals","JSON","stringify","MapRenderer","window","onresize","forceUpdate","state","isDragging","isAnimating","lastCusorPos","_mouseDownHandler","_mouseUpHandler","_mouseMoveHandler","setState","assign","_animate","nextProps","nextState","handler","cursor","downloadableMap","components_Map","onMouseDown","onMouseUp","onMouseMove","debounce","e","persist","document","body","clientWidth","clientHeight","newState","pageX","pageY","xDiff","yDiff","onLocationChange","destLat","destLon","destCoords","currentCoords","tween","Between","time","easing","Easing","Cubic","InOut","on","v","pause","projections","keys","includes","replace","displayName","trim","Projections","updateUrl","history","replaceState","Utils","icon","iconSvg","feather","icons","toSvg","class","dangerouslySetInnerHTML","__html","styleIcon","colorA","colorB","isSelected","boxShadow","points","extractUrlParams","urlParams","setDefault","_urlParams","slicedToArray","projectionName","styleName","isNaN","parseInt","request","address","callback","console","log","asyncToGenerator","regenerator_default","mark","_callee","json","wrap","_context","prev","next","ky","sent","stop","App","pn","location","pathname","split","slice","_utils$extractUrlPara","utils","_utils$extractUrlPara2","searchString","searchLat","searchLon","currentLat","currentLon","svgNode","_inputHandler","_geolocate","_download","_handleKeyPress","_onLocationChange","_changeStyle","_changeProjection","_updateSvg","styleIcons","onClick","projectionList","autoFocus","placeholder","onKeyPress","onChange","components_MapRenderer","target","fileFormat","node","domtoimage","toPng","then","dataUrl","download","catch","error","blob","Blob","innerHTML","type","Boolean","hostname","match","ReactDOM","render","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.19e789e9.chunk.js","sourcesContent":["import React from 'react';\nimport * as d3 from 'd3';\n\nconst Country = (props) => {\n  const path = d3.geoPath().projection(props.projection)\n\n  return (\n    <g>\n      <path className='country' d={path(props.feature)} fill={props.fill} stroke={props.stroke} strokeWidth={0.35} />\n    </g>\n  )\n}\n\nexport default Country;\n","import React from 'react';\n\nconst Label = (props) => {\n  const scaleFactor = props.size*0.001\n  const fontStyle = `bold ${5+scaleFactor}px sans-serif` //${props.size > 20 ? 'bold' : 'normal'}\n  const value = props.properties.NAME\n  const xOffset = (value.length/2)*2.3+scaleFactor\n\n  return (\n    <text\n      stroke='white'\n      strokeWidth={0.3}\n      x={props.x-xOffset}\n      y={props.y}\n      style={{font: fontStyle, color: '#253044'}}>\n\n      {value}\n    </text>\n  )\n}\n\nexport default Label;\n","import React from 'react';\nimport * as d3 from 'd3';\n\nconst Graticule = (props) => {\n  const path = d3.geoPath().projection(props.projection)\n\n  return (\n    <g>\n      <path className='graticule' d={path(props.feature)} fill=\"none\" stroke=\"#FEAB6C\" strokeWidth={1} />\n    </g>\n  )\n}\n\nexport default Graticule;\n","import React from 'react';\nimport * as d3 from 'd3';\n\nconst Bathymetry = (props) => {\n  const path = d3.geoPath().projection(props.projection)\n  //rgba(117, 193, 240, 0.63)\n\n  return (\n    <g>\n      <path className='bathymetry' d={path(props.feature)} fill={props.fill} stroke=\"#FEAB6C\" strokeWidth={0} />\n    </g>\n  )\n}\n\nexport default Bathymetry;\n","import React, { Component } from 'react';\nimport * as d3 from 'd3';\nimport * as d3projections from 'd3-geo-projection';\n\nimport Country from './map/Country'\nimport Label from './map/Label'\nimport Graticule from './map/Graticule'\nimport Bathymetry from './map/Bathymetry'\n\nimport MAPDATA_LOW from '../map-data/110m';\nimport MAPDATA_HIGH from '../map-data/50m';\n// import GRATICULES from '../map-data/graticules_10';\n//\n// import BATHYMETRY_0 from '../map-data/bathymetry_J_1000';\n// import BATHYMETRY_1 from '../map-data/bathymetry_H_3000';\n// import BATHYMETRY_2 from '../map-data/bathymetry_G_4000';\n// import BATHYMETRY_3 from '../map-data/bathymetry_F_5000';\n\nclass Map extends Component {\n  constructor() {\n    super()\n\n    this._getStatePaths = this._getStatePaths.bind(this)\n    this._getGraticules = this._getGraticules.bind(this)\n    this._getBathymetry = this._getBathymetry.bind(this)\n    this._getLabelData = this._getLabelData.bind(this)\n\n    this.svgRef = React.createRef()\n  }\n\n  componentWillMount() {\n    const getLabelData = (data) => {\n     return data.features.map(feature => {\n       return {\n         size: d3.geoPath().area(feature),\n         coordinates: d3.geoPath().centroid(feature),\n         properties: feature.properties\n       }\n     })\n    }\n\n    this.labelData = getLabelData(MAPDATA_HIGH)\n\n    this.projection = d3projections.geoCylindricalEqualArea()\n       // .rotate([-120, -14, 0]) //long, lat, 0\n       // .parallel(45)\n       .center([0, 0]) // set centre to further North\n       // .scale([w/(2*Math.PI)]) // scale to fit group width\n  }\n\n  componentDidUpdate(props) {\n    if(props.updateSvg) {\n      this.props.updateSvg(this.svgRef.current)\n    }\n  }\n\n  componentDidMount() {\n    if(this.props.updateSvg) {\n      this.props.updateSvg(this.svgRef.current)\n    }\n  }\n\n  render() {\n    const w = this.props.width\n    const h = this.props.height\n    const lon = this.props.lon\n    const lat = this.props.lat\n    const projection = 'geo'+this.props.projection\n\n    this.projection = d3projections[projection]().center([0, 0])\n\n    this.projection\n       .scale([w/(2*Math.PI)*1.4]) // scale to fit group width\n       .translate([w/2,h/2]) // ensure centred in group\n       .rotate([-lon,-lat, 0])\n\n    const mapData = this.props.renderLevel === 0 ? MAPDATA_LOW : MAPDATA_HIGH\n    const statePaths = this._getStatePaths(mapData)\n    const graticules = this.props.renderLevel === 0 ? [] : []//this._getGraticules(GRATICULES)\n    const bathymetry = this.props.renderLevel === 0 ? [] : []//this._getBathymetry([BATHYMETRY_3])\n    const labels = this.props.renderLevel === 0 ? [] : this._getLabelData()\n\n    return (\n      <div>\n        <div ref={this.svgRef}>\n          <svg xmlns='http://www.w3.org/2000/svg' className=\"container noselect\" width={this.props.width} height={this.props.height}>\n            <rect width={this.props.width} height={this.props.height} fill={this.props.mapStyle.sea}></rect>\n            <g className=\"countries\">\n              {statePaths}\n            </g>\n            <g className=\"bathymetry\">\n              {bathymetry}\n            </g>\n            <g className=\"graticules\">\n              {graticules}\n            </g>\n            <g className=\"labels\">\n              {labels}\n            </g>\n          </svg>\n        </div>\n      </div>\n    );\n  }\n\n  _getStatePaths(data) {\n    return data.features.map((feature, i) => {\n      return <Country stroke={this.props.mapStyle.borders} fill={this.props.mapStyle.land} projection={this.projection} feature={feature} key={i} />;\n    })\n  }\n\n  _getGraticules(data) {\n    return data.features.map((feature, i) => {\n      return <Graticule projection={this.projection} feature={feature} key={i} />;\n    })\n  }\n\n  _getBathymetry(data) {\n    return data.map((dataset, i) => {\n      return dataset.features.map((feature, j) => {\n        return <Bathymetry fill={this.props.mapStyle.sea} projection={this.projection} feature={feature} key={i+j} />;\n      })\n    })\n  }\n\n  _getLabelData() {\n    // TODO: This dataset is actually already available on the natural earth repo in the /geojson directory\n    // This would mean no edge cases like america label offset because of Hawaii skewing centroid\n    return this.labelData.map((c, i) => {\n      const projectedCoord = this.projection([c.coordinates[0], c.coordinates[1]])\n      return <Label x={projectedCoord[0]} y={projectedCoord[1]} properties={c.properties} size={c.size} key={i}/>\n    })\n  }\n}\n\nexport default Map;\n","const styles = [\n  {\n    name: 'namria',\n    land: '#E6E8E9',\n    sea: '#C4D4E0',\n    labels: 'black',\n    borders: '#B90700',\n  },\n  {\n    name: 'brownie',\n    land: 'brown',\n    sea: 'blue',\n    labels: 'white',\n    borders: 'orange'\n  },\n  {\n    name: 'orangeface',\n    land: 'orange',\n    sea: 'red',\n    labels: 'white',\n    borders: 'brown'\n  },\n]\n\nexport default {\n  list: styles,\n  default: styles[0],\n  isValid: (name) => {\n    return styles.filter((p) => p.name === name).length > 0\n  },\n  get: (name) => {\n    return styles.filter(s => name === s.name)[0]\n  }\n}\n","import React, { Component } from 'react';\nimport Between from 'between.js';\nimport { debounce } from 'throttle-debounce';\nimport Map from './Map'\nimport styles from '../Styles'\n\nconst coordinateEquals = (a, b) => {\n  return a.lat === b.lat && a.lon === b.lon\n}\n\nconst objectEquals = (a, b) => {\n  return JSON.stringify(a) === JSON.stringify(b)\n}\n\nconst captureEvent = (handler) => {\n  return (e) => {\n    e.persist()\n    return handler(e)\n  }\n}\n\nclass MapRenderer extends Component {\n  constructor() {\n    super()\n    window.onresize = () => {\n      this.forceUpdate()\n    }\n\n    this.state = {\n      lat: 0,\n      lon: 0,\n      style: styles[0],\n      isDragging: false,\n      isAnimating: false,\n      lastCusorPos: {\n        x: null,\n        y: null\n      },\n    }\n\n    this._mouseDownHandler = this._mouseDownHandler.bind(this)\n    this._mouseUpHandler = this._mouseUpHandler.bind(this)\n    this._mouseMoveHandler = this._mouseMoveHandler.bind(this)\n  }\n\n  componentDidMount() {\n    this.setState(Object.assign({}, this.state, {lat: this.props.lat, lon: this.props.lon}))\n  }\n\n  componentWillReceiveProps(props) {\n    if(!coordinateEquals(props, this.state) && !coordinateEquals(props, this.props)){\n      this._animate(props.lat, props.lon)\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    // Prevent unnecesary rerenders when typing into input box\n    if(objectEquals(this.props, nextProps) && objectEquals(this.state, nextState)) {\n      return false\n    }\n    return true\n  }\n\n  render() {\n    const renderLevel = this.state.isDragging || this.state.isAnimating ? 0 : 1\n    const cursor = this.state.isDragging ? 'grabbing' : 'grab'\n    const downloadableMap = (\n      <div className='mapDownload'>\n        <Map\n          mapStyle={this.props.mapStyle}\n          renderLevel={renderLevel}\n          projection={this.props.projection}\n          lat={this.state.lat}\n          lon={this.state.lon}\n          width={4000}\n          height={2000}\n          updateSvg={this.props.updateSvg}\n\n        />\n      </div>\n    )\n\n\n    return (\n      <div style={{cursor: cursor}}\n              onMouseDown={this._mouseDownHandler}\n              onMouseUp={this._mouseUpHandler}\n              onMouseMove={captureEvent(debounce(10, this._mouseMoveHandler))}>\n\n        <Map\n          mapStyle={this.props.mapStyle}\n          renderLevel={renderLevel}\n          projection={this.props.projection}\n          lat={this.state.lat}\n          lon={this.state.lon}\n          width={document.body.clientWidth}\n          height={document.body.clientHeight}\n        />\n\n        {renderLevel === 1 ? downloadableMap : ''}\n      </div>\n    )\n  }\n\n  _mouseDownHandler(e) {\n    const newState = {\n      isDragging: true,\n      lastCusorPos: {\n        x: e.pageX,\n        y: e.pageY\n      }\n    }\n    this.setState(Object.assign({}, this.state, newState))\n  }\n\n  _mouseUpHandler(e) {\n    const newState = {\n      isDragging: false,\n      lastCusorPos: {\n        x: null,\n        y: null\n      }\n    }\n    this.setState(Object.assign({}, this.state, newState))\n  }\n\n  _mouseMoveHandler(e) {\n    if(this.state.isDragging) {\n      const xDiff = e.pageX - this.state.lastCusorPos.x\n      const yDiff = e.pageY - this.state.lastCusorPos.y\n\n      const lon = this.state.lon-xDiff\n      const lat = this.state.lat+yDiff\n\n      this.props.onLocationChange(lat, lon, this.props.mapStyle.name)\n\n      this.setState(Object.assign({}, this.state, {\n        lon: lon,\n        lat: lat,\n        lastCusorPos: {\n          x: e.pageX,\n          y: e.pageY\n        }\n      }))\n    }\n  }\n\n  _animate(destLat, destLon) {\n    let onLocationChange = this.props.onLocationChange\n    const destCoords = {\n      lat: destLat,\n      lon: destLon\n    }\n\n    if(!coordinateEquals(this.state, destCoords)) {\n      this.setState(Object.assign({}, this.state, {isAnimating: true}))\n      const currentCoords = {\n        lat: this.state.lat,\n        lon: this.state.lon\n      }\n\n      const tween = new Between(currentCoords, destCoords)\n        .time(3000)\n        .easing(Between.Easing.Cubic.InOut)\n        .on('update', (v) => {\n            if(this.state.isAnimating) {\n              this.setState(Object.assign({}, this.state, {lat: v.lat, lon: v.lon}))\n            } else {\n              tween.pause()\n            }\n\n            if(this.state.isDragging) {\n              tween.pause()\n              this.setState(Object.assign({}, this.state, {isAnimating: false}))\n            }\n        }).on('complete', (value) => {\n            onLocationChange(this.state.lat, this.state.lon)\n            this.setState(Object.assign({}, this.state, {isAnimating: false}))\n        });\n    }\n  }\n}\n\n\nexport default MapRenderer;\n","import * as d3projections from 'd3-geo-projection';\n\nconst compatibleProjections = (name) => {\n  return !name.includes('Raw')\n}\n\nconst projections = Object.keys(d3projections).filter(compatibleProjections).map(v => {\n  return {\n    name: v.replace(/geo/g, ''),\n    displayName: v.replace(/geo/g, '').replace(/([A-Z])/g, ' $1').trim()\n  }\n})\n\nexport default {\n  list: projections,\n  default: projections[0],\n  isValid: (name) => {\n    return projections.filter((p) => p.name === name).length > 0\n  },\n  get: (name) => {\n    return projections.filter(p => name === p.name)[0]\n  }\n}\n","import React, { Component } from 'react';\nimport feather from 'feather-icons'\nimport ky from 'ky';\nimport styles from './Styles'\nimport projections from './Projections'\n\nconst icon = (name, size) => {\n  const iconSvg = feather.icons[name].toSvg({ width: size, class: 'icon' })\n  return <span dangerouslySetInnerHTML={{__html: iconSvg}}></span>\n}\n\nconst styleIcon = (colorA, colorB, size, isSelected) => {\n  const style = {\n    width: size,\n    height: size,\n    boxShadow: isSelected ? '0 0 0pt 1.5pt rgba(0,0,0,0.2)' : 'none',\n  }\n  return (\n    <div className='styleIcon' style={style}>\n      <svg width={size} height={size}>\n        <rect fill={colorA} x='0' y='0' width={size} height={size} />\n        <polygon fill={colorB} points={`0,0 0,${size} ${size},0`} />\n      </svg>\n    </div>\n  )\n}\n\nconst updateUrl = (lat, lon, projection, style) => {\n  window.history.replaceState({}, '', `/${lat}/${lon}/${projection}/${style}`)\n}\n\nconst extractUrlParams = (urlParams) => {\n  const setDefault = () => {\n    updateUrl(0, 0, projections.default.name, styles.default.name)\n    return [0, 0, projections.default.name, styles.default.name]\n  }\n\n  const [lat, lon, projectionName, styleName] = urlParams\n\n  if(isNaN(lat) || isNaN(lon))              return setDefault()\n  if(!projections.isValid(projectionName))  return setDefault()\n  if(!styles.isValid(styleName))            return setDefault()\n\n  return [parseInt(lat, 10), parseInt(lon, 10), projectionName, styleName]\n}\n\nconst request = (address, callback) => {\n  const constructRequest = (a) => `https://eu1.locationiq.com/v1/search.php?key=${'10bb188a4dae33'}&q=${a}&format=json`\n  console.log(\"Making request\");\n  (async () => {\n    console.log(\"WHY IS NOD\");\n    const json = await ky.get(constructRequest(address)).json();\n    console.log(json);\n\n    callback(json)\n  })();\n}\n\nexport default {\n  icon: icon,\n  styleIcon: styleIcon,\n  updateUrl: updateUrl,\n  extractUrlParams: extractUrlParams,\n  request: request\n}\n","import React, { Component } from 'react';\nimport './App.css';\nimport MapRenderer from './components/MapRenderer'\nimport styles from './Styles'\nimport download from 'downloadjs'\nimport domtoimage from 'dom-to-image';\nimport projections from './Projections'\nimport utils from './Utils'\n\nclass App extends Component {\n  constructor() {\n    super()\n    const pn = window.location.pathname.split('/').slice(1)\n    const [lat, lon, projectionName, styleName] = utils.extractUrlParams(pn)\n\n    this.state = {\n      searchString: '',\n      searchLat: lat,\n      searchLon: lon,\n      projection:  projectionName,\n      currentLat: 0,\n      currentLon: 0,\n      style: styles.get(styleName),\n      svgNode: null\n    }\n\n    this._inputHandler = this._inputHandler.bind(this)\n    this._geolocate = this._geolocate.bind(this)\n    this._download = this._download.bind(this)\n    this._handleKeyPress = this._handleKeyPress.bind(this)\n    this._onLocationChange = this._onLocationChange.bind(this)\n    this._changeStyle = this._changeStyle.bind(this)\n    this._changeProjection = this._changeProjection.bind(this)\n    this._updateSvg = this._updateSvg.bind(this)\n  }\n\n  render() {\n    const styleIcons = styles.list.map((s, key) => {\n      const isSelected = s.name === this.state.style.name\n      return <div key={key} onClick={() => this._changeStyle(s)} className='button'>{utils.styleIcon(s.land, s.sea, 16, isSelected)}</div>\n    })\n\n    const projectionList = projections.list.map((p, i) => {\n      return <div key={i} onClick={() => this._changeProjection(p.name)}>{p.displayName}</div>\n    })\n\n    return (\n      <div className=\"App\">\n        <div className=\"toolbar\">\n          <div className='input'>\n            <input autoFocus placeholder='Type any location...' onKeyPress={this._handleKeyPress} onChange={this._inputHandler} />\n            <div className='button' onClick={this._geolocate}>{utils.icon('search', 16)}</div>\n          </div>\n          <div className='map-styles'>\n            {styleIcons}\n          </div>\n          <div className='projections'>\n            {projectionList}\n          </div>\n\n          <div className='download'>\n              <div className='button' onClick={() => this._download('svg')}> Save SVG </div>\n              <div className='button' onClick={() => this._download('png')}> Save PNG </div>\n          </div>\n        </div>\n\n        <MapRenderer\n          mapStyle={this.state.style}\n          projection={this.state.projection}\n          lat={this.state.searchLat}\n          lon={this.state.searchLon}\n          onLocationChange={this._onLocationChange}\n          updateSvg={this._updateSvg}\n        />\n      </div>\n    );\n  }\n\n  _updateSvg(s) {\n    this.setState(Object.assign({}, this.state, {svgNode: s}))\n  }\n\n  _changeStyle(s) {\n    utils.updateUrl(this.state.currentLat, this.state.currentLon, this.state.projection, s.name)\n    this.setState(Object.assign({}, this.state, {style: s}))\n  }\n\n  _changeProjection(projectionName) {\n    utils.updateUrl(this.state.currentLat, this.state.currentLon, projectionName, this.state.style.name)\n    this.setState(Object.assign({}, this.state, {projection: projectionName}))\n  }\n\n  _handleKeyPress(e) {\n    if(e.key === 'Enter') this._geolocate()\n  }\n\n  _onLocationChange(lat, lon) {\n    utils.updateUrl(lat, lon, this.state.projection, this.state.style.name)\n    this.setState(Object.assign({}, this.state, {currentLat: lat, currentLon: lon}))\n  }\n\n  _inputHandler(e) {\n    this.setState(Object.assign({}, this.state, {searchString: e.target.value}))\n  }\n\n  _download(fileFormat) {\n    const node = this.state.svgNode\n    console.log('Downloading...', node)\n\n    if(!node) return\n\n    if(fileFormat === 'svg') {\n      const blob = new Blob([node.innerHTML], {type: 'image/svg+xml'});\n      download(blob, \"maps.svg\", \"image/svg+xml\");\n      return\n    }\n\n    domtoimage.toPng(node)\n      .then(dataUrl => {\n          download(dataUrl, 'map.png')\n      })\n      .catch(error => {\n          console.error('oops, something went wrong!', error);\n      });\n  }\n\n  _geolocate(e) {\n    if(this.state.searchString.length === 0) {\n      this.setState(Object.assign({}, this.state, {searchLat: 0, searchLon: 0}))\n      return\n    }\n\n    utils.request(this.state.searchString,\n      (d) => this.setState(Object.assign({}, this.state, {searchLat: parseInt(d[0].lat), searchLon: parseInt(d[0].lon)}))\n    )\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}